/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var ft=Object.create;var B=Object.defineProperty;var mt=Object.getOwnPropertyDescriptor;var gt=Object.getOwnPropertyNames;var Ft=Object.getPrototypeOf,wt=Object.prototype.hasOwnProperty;var R=(n,t)=>()=>(t||n((t={exports:{}}).exports,t),t.exports),bt=(n,t)=>{for(var e in t)B(n,e,{get:t[e],enumerable:!0})},ve=(n,t,e,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of gt(t))!wt.call(n,s)&&s!==e&&B(n,s,{get:()=>t[s],enumerable:!(i=mt(t,s))||i.enumerable});return n};var M=(n,t,e)=>(e=n!=null?ft(Ft(n)):{},ve(t||!n||!n.__esModule?B(e,"default",{value:n,enumerable:!0}):e,n)),Et=n=>ve(B({},"__esModule",{value:!0}),n);var ae=R((wi,_e)=>{"use strict";var ke=require("fs"),re;function Pt(){try{return ke.statSync("/.dockerenv"),!0}catch(n){return!1}}function St(){try{return ke.readFileSync("/proc/self/cgroup","utf8").includes("docker")}catch(n){return!1}}_e.exports=()=>(re===void 0&&(re=Pt()||St()),re)});var Me=R((bi,le)=>{"use strict";var Tt=require("os"),It=require("fs"),Oe=ae(),Re=()=>{if(process.platform!=="linux")return!1;if(Tt.release().toLowerCase().includes("microsoft"))return!Oe();try{return It.readFileSync("/proc/version","utf8").toLowerCase().includes("microsoft")?!Oe():!1}catch(n){return!1}};process.env.__IS_WSL_TEST__?le.exports=Re:le.exports=Re()});var Ne=R((Ei,$e)=>{"use strict";$e.exports=(n,t,e)=>{let i=s=>Object.defineProperty(n,t,{value:s,enumerable:!0,writable:!0});return Object.defineProperty(n,t,{configurable:!0,enumerable:!0,get(){let s=e();return i(s),s},set(s){i(s)}}),n}});var Ke=R((Ai,He)=>{var kt=require("path"),_t=require("child_process"),{promises:K,constants:We}=require("fs"),H=Me(),Ot=ae(),pe=Ne(),De=kt.join(__dirname,"xdg-open"),{platform:P,arch:Le}=process,Rt=()=>{try{return K.statSync("/run/.containerenv"),!0}catch(n){return!1}},ce;function Mt(){return ce===void 0&&(ce=Rt()||Ot()),ce}var $t=(()=>{let n="/mnt/",t;return async function(){if(t)return t;let e="/etc/wsl.conf",i=!1;try{await K.access(e,We.F_OK),i=!0}catch(r){}if(!i)return n;let s=await K.readFile(e,{encoding:"utf8"}),o=/(?<!#.*)root\s*=\s*(?<mountPoint>.*)/g.exec(s);return o?(t=o.groups.mountPoint.trim(),t=t.endsWith("/")?t:`${t}/`,t):n}})(),Be=async(n,t)=>{let e;for(let i of n)try{return await t(i)}catch(s){e=s}throw e},G=async n=>{if(n={wait:!1,background:!1,newInstance:!1,allowNonzeroExitCode:!1,...n},Array.isArray(n.app))return Be(n.app,a=>G({...n,app:a}));let{name:t,arguments:e=[]}=n.app||{};if(e=[...e],Array.isArray(t))return Be(t,a=>G({...n,app:{name:a,arguments:e}}));let i,s=[],o={};if(P==="darwin")i="open",n.wait&&s.push("--wait-apps"),n.background&&s.push("--background"),n.newInstance&&s.push("--new"),t&&s.push("-a",t);else if(P==="win32"||H&&!Mt()&&!t){let a=await $t();i=H?`${a}c/Windows/System32/WindowsPowerShell/v1.0/powershell.exe`:`${process.env.SYSTEMROOT}\\System32\\WindowsPowerShell\\v1.0\\powershell`,s.push("-NoProfile","-NonInteractive","\u2013ExecutionPolicy","Bypass","-EncodedCommand"),H||(o.windowsVerbatimArguments=!0);let l=["Start"];n.wait&&l.push("-Wait"),t?(l.push(`"\`"${t}\`""`,"-ArgumentList"),n.target&&e.unshift(n.target)):n.target&&l.push(`"${n.target}"`),e.length>0&&(e=e.map(c=>`"\`"${c}\`""`),l.push(e.join(","))),n.target=Buffer.from(l.join(" "),"utf16le").toString("base64")}else{if(t)i=t;else{let a=!__dirname||__dirname==="/",l=!1;try{await K.access(De,We.X_OK),l=!0}catch(u){}i=process.versions.electron||P==="android"||a||!l?"xdg-open":De}e.length>0&&s.push(...e),n.wait||(o.stdio="ignore",o.detached=!0)}n.target&&s.push(n.target),P==="darwin"&&e.length>0&&s.push("--args",...e);let r=_t.spawn(i,s,o);return n.wait?new Promise((a,l)=>{r.once("error",l),r.once("close",c=>{if(!n.allowNonzeroExitCode&&c>0){l(new Error(`Exited with code ${c}`));return}a(r)})}):(r.unref(),r)},de=(n,t)=>{if(typeof n!="string")throw new TypeError("Expected a `target`");return G({...t,target:n})},Nt=(n,t)=>{if(typeof n!="string")throw new TypeError("Expected a `name`");let{arguments:e=[]}=t||{};if(e!=null&&!Array.isArray(e))throw new TypeError("Expected `appArguments` as Array type");return G({...t,app:{name:n,arguments:e}})};function Ve(n){if(typeof n=="string"||Array.isArray(n))return n;let{[Le]:t}=n;if(!t)throw new Error(`${Le} is not supported`);return t}function ue({[P]:n},{wsl:t}){if(t&&H)return Ve(t);if(!n)throw new Error(`${P} is not supported`);return Ve(n)}var X={};pe(X,"chrome",()=>ue({darwin:"google chrome",win32:"chrome",linux:["google-chrome","google-chrome-stable","chromium"]},{wsl:{ia32:"/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe",x64:["/mnt/c/Program Files/Google/Chrome/Application/chrome.exe","/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe"]}}));pe(X,"firefox",()=>ue({darwin:"firefox",win32:"C:\\Program Files\\Mozilla Firefox\\firefox.exe",linux:"firefox"},{wsl:"/mnt/c/Program Files/Mozilla Firefox/firefox.exe"}));pe(X,"edge",()=>ue({darwin:"microsoft edge",win32:"msedge",linux:["microsoft-edge","microsoft-edge-dev"]},{wsl:"/mnt/c/Program Files (x86)/Microsoft/Edge/Application/msedge.exe"}));de.apps=X;de.openApp=Nt;He.exports=de});var nt=R((Ni,st)=>{function Ue(n){return Array.isArray(n)?n:[n]}var Fe="",Je=" ",me="\\",Ht=/^\s+$/,Kt=/(?:[^\\]|^)\\$/,Gt=/^\\!/,Xt=/^\\#/,zt=/\r?\n/g,Yt=/^\.*\/|^\.+$/,ge="/",et="node-ignore";typeof Symbol!="undefined"&&(et=Symbol.for("node-ignore"));var Qe=et,jt=(n,t,e)=>Object.defineProperty(n,t,{value:e}),qt=/([0-z])-([0-z])/g,tt=()=>!1,Ut=n=>n.replace(qt,(t,e,i)=>e.charCodeAt(0)<=i.charCodeAt(0)?t:Fe),Jt=n=>{let{length:t}=n;return n.slice(0,t-t%2)},Qt=[[/^\uFEFF/,()=>Fe],[/((?:\\\\)*?)(\\?\s+)$/,(n,t,e)=>t+(e.indexOf("\\")===0?Je:Fe)],[/(\\+?)\s/g,(n,t)=>{let{length:e}=t;return t.slice(0,e-e%2)+Je}],[/[\\$.|*+(){^]/g,n=>`\\${n}`],[/(?!\\)\?/g,()=>"[^/]"],[/^\//,()=>"^"],[/\//g,()=>"\\/"],[/^\^*\\\*\\\*\\\//,()=>"^(?:.*\\/)?"],[/^(?=[^^])/,function(){return/\/(?!$)/.test(this)?"^":"(?:^|\\/)"}],[/\\\/\\\*\\\*(?=\\\/|$)/g,(n,t,e)=>t+6<e.length?"(?:\\/[^\\/]+)*":"\\/.+"],[/(^|[^\\]+)(\\\*)+(?=.+)/g,(n,t,e)=>{let i=e.replace(/\\\*/g,"[^\\/]*");return t+i}],[/\\\\\\(?=[$.|*+(){^])/g,()=>me],[/\\\\/g,()=>me],[/(\\)?\[([^\]/]*?)(\\*)($|\])/g,(n,t,e,i,s)=>t===me?`\\[${e}${Jt(i)}${s}`:s==="]"&&i.length%2===0?`[${Ut(e)}${i}]`:"[]"],[/(?:[^*])$/,n=>/\/$/.test(n)?`${n}$`:`${n}(?=$|\\/$)`],[/(\^|\\\/)?\\\*$/,(n,t)=>`${t?`${t}[^/]+`:"[^/]*"}(?=$|\\/$)`]],Ze=Object.create(null),Zt=(n,t)=>{let e=Ze[n];return e||(e=Qt.reduce((i,[s,o])=>i.replace(s,o.bind(n)),n),Ze[n]=e),t?new RegExp(e,"i"):new RegExp(e)},Ee=n=>typeof n=="string",ei=n=>n&&Ee(n)&&!Ht.test(n)&&!Kt.test(n)&&n.indexOf("#")!==0,ti=n=>n.split(zt),we=class{constructor(t,e,i,s){this.origin=t,this.pattern=e,this.negative=i,this.regex=s}},ii=(n,t)=>{let e=n,i=!1;n.indexOf("!")===0&&(i=!0,n=n.substr(1)),n=n.replace(Gt,"!").replace(Xt,"#");let s=Zt(n,t);return new we(e,n,i,s)},si=(n,t)=>{throw new t(n)},x=(n,t,e)=>Ee(n)?n?x.isNotRelative(n)?e(`path should be a \`path.relative()\`d string, but got "${t}"`,RangeError):!0:e("path must not be empty",TypeError):e(`path must be a string, but got \`${t}\``,TypeError),it=n=>Yt.test(n);x.isNotRelative=it;x.convert=n=>n;var be=class{constructor({ignorecase:t=!0,ignoreCase:e=t,allowRelativePaths:i=!1}={}){jt(this,Qe,!0),this._rules=[],this._ignoreCase=e,this._allowRelativePaths=i,this._initCache()}_initCache(){this._ignoreCache=Object.create(null),this._testCache=Object.create(null)}_addPattern(t){if(t&&t[Qe]){this._rules=this._rules.concat(t._rules),this._added=!0;return}if(ei(t)){let e=ii(t,this._ignoreCase);this._added=!0,this._rules.push(e)}}add(t){return this._added=!1,Ue(Ee(t)?ti(t):t).forEach(this._addPattern,this),this._added&&this._initCache(),this}addPattern(t){return this.add(t)}_testOne(t,e){let i=!1,s=!1;return this._rules.forEach(o=>{let{negative:r}=o;if(s===r&&i!==s||r&&!i&&!s&&!e)return;o.regex.test(t)&&(i=!r,s=r)}),{ignored:i,unignored:s}}_test(t,e,i,s){let o=t&&x.convert(t);return x(o,t,this._allowRelativePaths?tt:si),this._t(o,e,i,s)}_t(t,e,i,s){if(t in e)return e[t];if(s||(s=t.split(ge)),s.pop(),!s.length)return e[t]=this._testOne(t,i);let o=this._t(s.join(ge)+ge,e,i,s);return e[t]=o.ignored?o:this._testOne(t,i)}ignores(t){return this._test(t,this._ignoreCache,!1).ignored}createFilter(){return t=>!this.ignores(t)}filter(t){return Ue(t).filter(this.createFilter())}test(t){return this._test(t,this._testCache,!0)}},J=n=>new be(n),ni=n=>x(n&&x.convert(n),n,tt);J.isPathValid=ni;J.default=J;st.exports=J;if(typeof process!="undefined"&&(process.env&&process.env.IGNORE_TEST_WIN32||process.platform==="win32")){let n=e=>/^\\\\\?\\/.test(e)||/["<>|\u0000-\u001F]+/u.test(e)?e:e.replace(/\\/g,"/");x.convert=n;let t=/^[a-z]:\//i;x.isNotRelative=e=>t.test(e)||it(e)}});var pi={};bt(pi,{default:()=>ee});module.exports=Et(pi);var ht=M(require("fs")),b=require("obsidian");var g=require("obsidian");var ye=require("obsidian"),te=(i=>(i.SKIP="SKIP",i.OVERWRITE="OVERWRITE",i.KEEP="KEEP",i))(te||{});var Ce={["SKIP"]:"Skip",["OVERWRITE"]:"Overwrite",["KEEP"]:"Keep"},Pe={...Ce,["PROMPT"]:"Prompt user"},V=class extends ye.Modal{constructor(e,i){super(e);this.applyToAll=!1;let{contentEl:s}=this;this.setTitle("There is a conflict with: "),s.createDiv({cls:"fn-modal-content"}).createEl("p",{text:i});let r=s.createEl("div",{cls:"modal-button-container"}),a=r.createEl("label",{cls:"mod-checkbox"});a.tabIndex=-1;let l=a.createEl("input",{type:"checkbox"});a.appendText("Don't ask again"),l.addEventListener("change",d=>{let p=d.target;this.applyToAll=p.checked}),Object.values(te).forEach(d=>{r.createEl("button",{text:Ce[d],cls:"mod-cta"}).addEventListener("click",()=>{this.resolvePromise([d,this.applyToAll]),this.close()})}),r.createEl("button",{text:"Cancel",cls:"mod-cancel"}).addEventListener("click",async()=>{this.resolvePromise(["SKIP",this.applyToAll]),this.close()})}onClose(){this.resolvePromise&&this.resolvePromise(["SKIP",this.applyToAll])}openAndWait(){return new Promise(e=>{this.resolvePromise=e,this.open()})}};var Te=require("path");function ne(){let n=this.app.vault.adapter;return n instanceof g.FileSystemAdapter?n.getBasePath():""}function oe(n){let t=ne(),e=(0,Te.normalize)(`${t}/${n.path}`);return g.Platform.isDesktopApp&&g.Platform.isWin?e.replace(/\//g,"\\"):e}function Ie(n,t){let e=n.lastIndexOf(w),i=n.lastIndexOf(Ct);if(i>e){let[s,o]=[n.slice(0,i),n.slice(i+1)];return`${s}${t}.${o}`}return n+t}function At(n){let t=[],e=n.split(w);for(let i=1;i<e.length;i++)t.push(e.slice(0,i).join(w));return t}function ie(n,t,e=!0){let i=t;for(let s=1;n.fileItems[i];s++)i=e?Ie(t,` ${s}`):`${t} ${s}`;return i}function xt(n){n.sort((i,s)=>i.split(w).length-s.split(w).length);let t=new Map;n.forEach(i=>{var o;let s=i.split(w).length;t.has(s)||t.set(s,new Set),(o=t.get(s))==null||o.add(i)});let e=[];return t.forEach((i,s)=>{i.forEach(o=>{s===1?e.push(o):At(o).some(a=>{var l;return(l=t.get(a.split(w).length))==null?void 0:l.has(a)})||e.push(o)})}),e}function vt(n){let t=new Map;return n.forEach(e=>t.set(e,e.split(w).pop())),t}function $(n,t){let e=n.fileItems[t];if(e)for(;;){e.file instanceof g.TFolder&&e.setCollapsed(!1);let i=e.file.parent;if(!i||!i.name)break;e=e.parent}}function yt(n,t){let e=n.containerEl.querySelector(`[data-path="${t}"]`);e&&e.scrollIntoView({behavior:"smooth",block:"center"})}var se="file-explorer",w="/",Ct=".",Se=["KEEP","OVERWRITE",null],W=class{constructor(t){this.plugin=t,this.app=t.app,this.vault=t.app.vault,this.workspace=t.app.workspace}getFileExplorer(){let t=this.workspace.getLeavesOfType(se);return!t||t.length===0?null:t[0].view}getFileExplorerAndActiveFileOrFolder(){var i,s,o;let t=this.getFileExplorer();if(!t)return{fileExplorer:null,activeFileOrFolder:null};let e=(o=(i=t.tree.focusedItem)==null?void 0:i.file)!=null?o:(s=t.activeDom)==null?void 0:s.file;return{fileExplorer:t,activeFileOrFolder:e}}getActiveFileOrFolder(){return this.getFileExplorerAndActiveFileOrFolder().activeFileOrFolder}getSelectedFilesOrFolders(t=!0){let{fileExplorer:e,activeFileOrFolder:i}=this.getFileExplorerAndActiveFileOrFolder();return e?e.tree.selectedDoms.size===0?t?i?[i]:[]:[]:Array.from(Array.from(e.tree.selectedDoms.values()).map(s=>s.file)):[]}getSelectedFilesOrFoldersPath(t=!1,e=!0){let i=this.getSelectedFilesOrFolders(e).map(s=>s.path);return t?xt(i):i}getSelectedPathToNameMap(t=!1,e=!0){return vt(this.getSelectedFilesOrFoldersPath(t,e))}isFileExplorerAvailable(){return this.getFileExplorer()!==null}isFileExplorerActive(){let t=this.workspace.getActiveViewOfType(g.View);return(t==null?void 0:t.getViewType())===se}isActiveFileOrFolderAvailable(){if(!this.isFileExplorerActive())return!1;let{activeFileOrFolder:t}=this.getFileExplorerAndActiveFileOrFolder();return t!==null}isFile(t){var e;try{return((e=this.getFileExplorer())==null?void 0:e.fileItems[t].file)instanceof g.TFile}catch(i){return!1}}isFolder(t){var e;try{return((e=this.getFileExplorer())==null?void 0:e.fileItems[t].file)instanceof g.TFolder}catch(i){return!1}}_focusAndRenameFile(t,e){setTimeout(async()=>await t.startRenameFile(e),100)}async _conflictSolver(t,e,i,s,o=null){let r=!0;return await this.vault.exists(i)?(o||([o,r]=await this.plugin.getFileConflictResolutionMethod(i)),o==="OVERWRITE"?(await this.app.fileManager.trashFile(t.fileItems[i].file),await s(e,i),["OVERWRITE",r,i]):o==="KEEP"?(i=ie(t,i),await s(e,i),["KEEP",r,i]):["SKIP",r,i]):(await s(e,i),[null,r,i])}async _createFolder(t){let{fileExplorer:e,activeFileOrFolder:i}=this.getFileExplorerAndActiveFileOrFolder();if(!e||!i)return null;let s=t(i);if(!s)return null;s!==w&&$(e,s);let o=(s===w?"":s+w)+this.plugin.settings.newFolderName;o=ie(e,o);let r=await this.vault.createFolder(o);return e.tree.setFocusedItem(e.fileItems[r.path],!0),this._focusAndRenameFile(e,r),o}async createSubFolder(){return await this._createFolder(t=>{var e;return t instanceof g.TFolder?t.path:(e=t.parent)==null?void 0:e.path})}async createFolder(){return await this._createFolder(t=>{var e;return(e=t.parent)==null?void 0:e.path})}async createNote(){var r;let{fileExplorer:t,activeFileOrFolder:e}=this.getFileExplorerAndActiveFileOrFolder();if(!t||!e)return null;let i=e instanceof g.TFolder?e.path:(r=e.parent)==null?void 0:r.path;$(t,i);let s=ie(t,i+w+this.plugin.settings.newNoteName);await this.vault.create(s,"");let o=t.fileItems[s];return t.tree.setFocusedItem(o,!0),this._focusAndRenameFile(t,o.file),s}async renameFile(){let{fileExplorer:t,activeFileOrFolder:e}=this.getFileExplorerAndActiveFileOrFolder();!t||!e||this.app.nextFrame(async()=>await t.startRenameFile(e))}async duplicateFile(){let{fileExplorer:t,activeFileOrFolder:e}=this.getFileExplorerAndActiveFileOrFolder();if(!t||!e)return;let i=e.path,s=Ie(i,this.plugin.settings.duplicateSuffix),[o,r,a]=await this._copyFileOrFolder(t,i,s,"KEEP"),l=t.fileItems[a].file;this._focusAndRenameFile(t,l)}async _moveFileOrFolder(t,e,i,s=null){return this._conflictSolver(t,e,i,async(o,r)=>{let a=t.app.fileManager,l=t.fileItems[o].file;await a.renameFile(l,r)},s)}async moveFiles(t,e=null,i=null){let s=new Map,o=this.getFileExplorer();if(!o)return s;e||(e=this.getSelectedPathToNameMap(!0));for(let[r,a]of e){let l=`${t}/${a}`,[c,u,d]=await this._moveFileOrFolder(o,r,l,i);Se.includes(c)&&$(o,t),s.set(l,c),u&&(i=c)}return s}async _copyFileOrFolder(t,e,i,s=null){return this._conflictSolver(t,e,i,async(o,r)=>{let a=t.fileItems[o].file;if(a instanceof g.TFile)await this.vault.copy(a,r);else if(a instanceof g.TFolder){let l=[];g.Vault.recurseChildren(a,c=>{l.push(c)});for(let c of l){let u=c.path.replace(new RegExp(`^${o}`),"");await this.vault.exists(`${r}${u}`)||(c instanceof g.TFile?await this.vault.copy(c,`${r}${u}`):c instanceof g.TFolder&&await this.vault.createFolder(`${r}${u}`))}}},s)}async copyFiles(t,e=null,i=null){let s=new Map,o=this.getFileExplorer();if(!o)return s;e||(e=this.getSelectedPathToNameMap(!0));for(let[r,a]of e){let l=`${t}/${a}`,[c,u,d]=await this._copyFileOrFolder(o,r,l,i);Se.includes(c)&&$(o,t),s.set(l,c),u&&(i=c)}return s}selectItems(t,e=!0){e&&this.deselectAll();let i=this.getFileExplorer();if(!i)return 0;let s=i.tree;return t.forEach(o=>{let r=i.fileItems[o];r&&s.selectItem(r)}),i.tree.selectedDoms.size}selectAll(t=!0){var r;let{fileExplorer:e,activeFileOrFolder:i}=this.getFileExplorerAndActiveFileOrFolder();if(!e||!i)return;let s=(r=i.parent)==null?void 0:r.path;if(!s)return;s=s===w?"":s+w;let o=e.tree;t&&o.clearSelectedDoms();for(let[a,l]of Object.entries(e.fileItems))a.startsWith(s)&&o.selectItem(l)}toggleSelect(t=!1){let{fileExplorer:e,activeFileOrFolder:i}=this.getFileExplorerAndActiveFileOrFolder();if(!e||!i)return;let s=e.tree;t&&s.clearSelectedDoms();let o=e.fileItems[i.path];e.tree.selectedDoms.has(o)?s.deselectItem(o):s.selectItem(o)}invertSelection(){let t=this.getFileExplorer();if(!t)return;let e=[];for(let s of Object.values(t.fileItems))t.tree.selectedDoms.has(s)||e.push(s);let i=t.tree;i.clearSelectedDoms(),e.forEach(s=>i.selectItem(s))}deselectAll(){let t=this.getFileExplorer();if(!t)return;t.tree.clearSelectedDoms()}focusPath(t){let{fileExplorer:e,activeFileOrFolder:i}=this.getFileExplorerAndActiveFileOrFolder();if(!e||!i)return null;let s=e.fileItems[t];s&&(this.workspace.setActiveLeaf(this.workspace.getLeavesOfType(se)[0],{focus:!0}),$(e,t),e.tree.setFocusedItem(s,!0),yt(e,t))}};var h=require("obsidian");var Ge=require("obsidian"),Xe=M(Ke()),z=M(require("path")),ze=require("fs"),v="{{file_path}}",S="{{folder_path}}",Y="{{file_name}}",j="{{folder_name}}";async function Ye(n,t,e,i,s,o){let r={};r.name=n,t=t.trim(),t&&(r.arguments=t.split(","),r.arguments.forEach((a,l)=>{a=a.trim(),a=a.includes(v)?a.replace(v,e):a,a=a.includes(S)?a.replace(S,i):a,a=a.includes(Y)?a.replace(Y,s):a,a=a.includes(j)?a.replace(j,o):a,r.arguments[l]=a})),await(0,Xe.default)("",{app:r})}async function Dt(n,t,e){let i=await ze.promises.stat(n),s=n,o=i.isDirectory()?n:z.default.dirname(n),r=z.default.basename(s),a=z.default.basename(o);await Ye(t,e,s,o,r,a)}async function Lt(n,t,e){let i=n instanceof Ge.TFolder?n:n.parent,s=oe(n),o=oe(i),r=n.name,a=i.name;await Ye(t,e,s,o,r,a)}async function T(n,t,e){typeof n=="string"?await Dt(n,t,e):await Lt(n,t,e)}var I=require("obsidian"),N=class extends I.FuzzySuggestModal{constructor(e,i){super(e);this.toDo=i;this.setPlaceholder("Search for a Lucide icon...")}getItems(){return(0,I.getIconIds)()}getItemText(e){return`lucide-${e}`}renderSuggestion(e,i){let s=i.createDiv();(0,I.setIcon)(s.createSpan(),e.item),s.createSpan({text:"  "}),s.createSpan({text:e.item})}onChooseItem(e,i){this.toDo(e)}};var he="files",fe="folders",Vt="files and folders",Wt=[{value:Vt,text:"Files & Folders"},{value:he,text:"Files"},{value:fe,text:"Folders"}],qe={conflictResolutionMethod:"SKIP",showSelectionStatusBar:!0,showCopyMoveStats:!0,showClipboardStatusBar:!0,newFolderName:"New Folder",newNoteName:"New Note.md",duplicateSuffix:" - Copy",apps:[],patterns:[]},q="circle-dashed";function je(n){return document.createRange().createContextualFragment(n)}var U=class extends h.PluginSettingTab{constructor(e,i){super(e,i);this.plugin=i}generalSection(e){new h.Setting(e).setName("Conflict resolution method").setDesc("Method to resolve conflicts in copy/move operations").addDropdown(i=>i.addOptions(Pe).setValue(this.plugin.settings.conflictResolutionMethod).onChange(async s=>{this.plugin.settings.conflictResolutionMethod=s,await this.plugin.saveSettings()})),new h.Setting(e).setName("Show copy/move stats").setDesc("When a copy/move operation is done, show the stats").addToggle(i=>i.setValue(this.plugin.settings.showCopyMoveStats).onChange(async s=>{this.plugin.settings.showCopyMoveStats=s,await this.plugin.saveSettings()})),new h.Setting(e).setName("Show selection info in status bar").setDesc("Show, in the status bar, the number of selected files/folders").addToggle(i=>i.setValue(this.plugin.settings.showSelectionStatusBar).onChange(async s=>{this.plugin.settings.showSelectionStatusBar=s,await this.plugin.saveSettings()})),new h.Setting(e).setName("Show clipboard info in status bar").setDesc("Show, in the status bar, the number of files/folders in the clipboard").addToggle(i=>i.setValue(this.plugin.settings.showClipboardStatusBar).onChange(async s=>{this.plugin.settings.showClipboardStatusBar=s,await this.plugin.saveSettings()})),new h.Setting(e).setName("Duplicate suffix").setDesc("Suffix to add when file/folder is duplicated").addText(i=>i.setPlaceholder("Enter your suffix").setValue(this.plugin.settings.duplicateSuffix).onChange(async s=>{s&&(this.plugin.settings.duplicateSuffix=s),await this.plugin.saveSettings()})),new h.Setting(e).setName("New folder name").setDesc("Default name of the folder to create").addText(i=>i.setPlaceholder("Enter folder name").setValue(this.plugin.settings.newFolderName).onChange(async s=>{s&&(this.plugin.settings.newFolderName=s),await this.plugin.saveSettings()})),new h.Setting(e).setName("New note name").setDesc("Default name of the note to create").addText(i=>i.setPlaceholder("Enter note name").setValue(this.plugin.settings.newNoteName).onChange(async s=>{s&&(this.plugin.settings.newNoteName=s),await this.plugin.saveSettings()}))}openWithSection(e){new h.Setting(e).setName("Open with...").setHeading(),new h.Setting(e).setName("Add new application to open with");let s=e.createDiv({cls:"setting-item-description"}),o=`Use full <i>path to command</i> or just <i>command</i> if it is globally available
		    (for example <i>c:\\Program Files\\myTool\\myTool.exe</i> or <i>code</i> for VSCode).<BR><BR>

		    Arguments are optional and can include any of these predefined variables:<BR><BR>

            <b>${v}</b> - File path<BR>
            <b>${S}</b> - Folder path<BR>
            <b>${Y}</b> - File name<BR>
            <b>${j}</b> - Folder name<BR><BR>

            If no arguments are provided, the <i>${v}</i> variable
            will be added automatically as argument for the command.<BR><BR>
            Sometimes the command needs the arguments to be send independently, 
            you can separate arguments using commas in those cases.<BR><BR>

            <b>Example 1:</b> Command: <i>/usr/bin/chromium-browser</i> | Arguments: <i>${v}</i><BR>
            <b>Example 2:</b> Command: <i>c:\\Program files\\OneCommander\\OneCommander.exe</i> | Arguments: <i>${v}</i><BR>
            <b>Example 3:</b> Command: <i>cmd</i> | Arguments: <i>/K cd ${S}</i><BR>
            <b>Example 4:</b> Command: <i>wt</i> | Arguments: <i>-p, Ubuntu, wsl, --cd, ${S}</i><BR><BR>

		    <b>NOTE:</b> No need to add double quotes for paths with spaces.<BR><BR>`;s.appendChild(je(o));let r=e.createDiv({cls:"settings-open-with-container"}),a=q,l=new h.ButtonComponent(r).setIcon(a).setTooltip("Choose icon").setClass("open-with-icon-btn").onClick(()=>{new N(this.app,p=>{a=p,a&&l.setIcon(a)}).open()}),c=r.createEl("input",{attr:{type:"text",placeholder:"Display name"},cls:"settings-open-with-name-inputbox"}),u=r.createEl("input",{attr:{type:"text",placeholder:"Command or full path command"},cls:"settings-open-with-cmd-inputbox"}),d=r.createEl("input",{attr:{type:"text",placeholder:"Arguments (optional)"},cls:"settings-open-with-args-inputbox"});new h.ButtonComponent(r).setIcon("rotate-ccw").setTooltip("Reset fields").setClass("open-with-reset-btn").onClick(()=>{c.value="",u.value="",d.value="",a=q,l.setIcon(a)}),new h.ButtonComponent(r).setIcon("circle-plus").setTooltip("Add command to open with...").setClass("open-with-add-btn").onClick(async()=>{let p=c.value.trim(),f=u.value.trim(),m=d.value.trim();if(!(p&&f))return new h.Notice("Display name & path/command are always neccessary.");m||(m=v),this.plugin.addCommand(this.plugin.createOpenWithCmd(p,f,m));let F={name:p,cmd:f,args:m,showInMenu:!1,icon:a},A=this.plugin.settings.apps,y=A.find(D=>D.name===F.name);y?(new h.Notice(`Modifying ${F.name} command.`),y.args=F.args,y.cmd=F.cmd,y.icon=F.icon):(A.push(F),new h.Notice(`Adding ${F.name} command.`)),await this.plugin.saveSettings(),this.display()}),this.plugin.settings.apps.forEach(p=>{p.icon||(p.icon=q),new h.Setting(e).setName(p.name).setDesc(`Command: ${p.cmd}${p.args?` | Arguments: ${p.args}`:""}`).addToggle(f=>{let m=document.createElement("span");m.textContent="Show in File-Menu ",m.classList.add("settings-open-with-show-text"),f.toggleEl.parentElement.prepend(m),f.setValue(p.showInMenu).onChange(async F=>{p.showInMenu=F,await this.plugin.saveSettings()})}).addButton(f=>{f.setIcon(p.icon).setTooltip("Icon for command").onClick(()=>{new N(this.app,async m=>{p.icon=m,p.icon&&f.setIcon(p.icon),await this.plugin.saveSettings()}).open()})}).addButton(f=>{f.setIcon("pen").setTooltip("Edit command").onClick(async()=>{c.value=p.name,u.value=p.cmd,d.value=p.args,a=p.icon,l.setIcon(a)})}).addButton(f=>{f.setIcon("trash").setTooltip("Remove command").onClick(async()=>{this.plugin.settings.apps.remove(p),await this.plugin.saveSettings(),this.display()})})})}pathExplorerSection(e){new h.Setting(e).setName("Path explorer").setHeading(),new h.Setting(e).setName("Define patterns to match files and folders and open them with an Open with... command.");let s=e.createDiv({cls:"setting-item-description"}),o=`The <b>pathexplore</b> codeblock displays files and folders 
        from a specified path or multiple paths. You can define <b>patterns</b> to 
        match the names of files and/or folders, and bind an <b>Open with...</b> 
        command to open them. For files and folders that match the patterns, an 
        icon will appear next to their name (and they will also appear in the link 
        context menu). Clicking the icon will open the file or folder using the 
        associated command.<br><br>`;s.appendChild(je(o));let r=e.createDiv({cls:"settings-path-explorer-container"}),a=r.createEl("input",{attr:{type:"text",placeholder:"Enter regular expression"},cls:"settings-path-explorer-regex"});r.createEl("div",{text:"Apply to: ",cls:"settings-path-explorer-label"});let l=r.createEl("select",{cls:"settings-path-explorer-dropdown dropdown"});Wt.map(d=>l.createEl("option",d)),r.createEl("div",{text:"Open with: ",cls:"settings-path-explorer-label"});let c=r.createEl("select",{cls:"settings-path-explorer-dropdown dropdown"}),u=this.plugin.settings.apps;for(let d of u.values())c.createEl("option",{value:d.name,text:d.name});new h.ButtonComponent(r).setIcon("rotate-ccw").setTooltip("Reset fields").setClass("settings-path-explorer-btn").onClick(()=>{a.value="",l.selectedIndex=0,c.selectedIndex=0}),new h.ButtonComponent(r).setIcon("circle-plus").setTooltip("Add pattern to open with...").setClass("settings-path-explorer-btn").onClick(async()=>{let d=a.value.trim(),p=l.value,f=c.value,m=u.find(L=>L.name===f),F=(m==null?void 0:m.icon)||q;if(!d||!f)return new h.Notice("Regular expression and Open with app are always neccessary.");let A={regex:d,applyTo:p,appName:f,icon:F},y=this.plugin.settings.patterns,D=y.find(L=>L.regex===A.regex&&L.appName===A.appName);D?(new h.Notice(`Modifiying ${A.regex} pattern.`),D.applyTo=A.applyTo):(y.push(A),new h.Notice(`Adding ${A.regex} pattern.`)),await this.plugin.saveSettings(),this.display()}),this.plugin.settings.patterns.forEach(d=>{let p=new h.Setting(e).setName(`${d.regex}`).setDesc(`All matching ${d.applyTo} will
                    be able to be open with ${d.appName}`).addButton(m=>{m.setIcon("pen").setTooltip("Edit command").onClick(async()=>{a.value=d.regex,l.value=d.applyTo,c.value=d.appName})}).addButton(m=>{m.setIcon("trash").setTooltip("Remove command").onClick(async()=>{this.plugin.settings.patterns.remove(d),await this.plugin.saveSettings(),this.display()})}),f=document.createElement("span");(0,h.setIcon)(f,d.icon),p.settingEl.prepend(f)})}display(){let{containerEl:e}=this;e.empty(),this.generalSection(e),this.openWithSection(e),this.pathExplorerSection(e)}};var _=require("obsidian");var Q=require("fs"),dt=M(nt()),k=M(require("path"));var Ae={paths:[],ignorePatterns:[],maxDepth:3,maxFiles:100,includeRoot:!1,flat:!1,hideFiles:!1,hideFolders:!1,hideIcons:!1},oi="#",ri=" ",Z="file:///",ai="path",li="ignore",ot="max-depth",rt="max-files",at="include-root",ci="flat",lt="hide-files",ct="hide-folders",pt="hide-icons",E=class extends Error{constructor(t){super(t),this.name="PathExplorerException",Object.setPrototypeOf(this,E.prototype)}},C=class{constructor(t){this.plugin=t,this.workspace=t.app.workspace}static matchPattern(t,e,i,s){if(!(t.applyTo===he&&i||t.applyTo===fe&&!i||!new RegExp(t.regex).test(e)))return s.find(a=>a.name===t.appName)}async processCodeBlock(t,e){try{let i=await this.parseConfig(t),s=await this.buildDirectoryTree(i),o=e.createDiv({cls:"path-explorer"});new _.ButtonComponent(o).setIcon("rotate-ccw").setTooltip("Refresh").setClass("path-explorer-refresh-button").onClick(()=>{let r=this.workspace.getActiveViewOfType(_.MarkdownView);r&&r.previewMode.rerender(!0)}),this.generateTreeHtml(s,o,i)}catch(i){i instanceof E&&e.createDiv({cls:"path-explorer-error"}).createSpan({text:`[PathExplorerError\u26A0\uFE0F] ${i.message}`})}}async parseConfig(t){let e={...Ae,paths:[...Ae.paths],ignorePatterns:[...Ae.ignorePatterns]};if(t.split(`
`).forEach(i=>{if(i=i.trim(),!i||i.startsWith(oi))return;let s=i.indexOf(ri),o=s>=0?i.slice(0,s).trim():i,r=s>=0?i.slice(s+1).trim():"";switch(o.toLowerCase()){case ai:e.paths.push(r);break;case li:e.ignorePatterns.push(r);break;case ot:if(e.maxDepth=parseInt(r),isNaN(e.maxDepth))throw new E(`Invalid ${ot} value: ${r}`);break;case rt:if(e.maxFiles=parseInt(r),isNaN(e.maxFiles))throw new E(`Invalid ${rt} value: ${r}`);break;case at:if(e.includeRoot=!0,r)throw new E(`No value expected for ${at}.`);break;case pt:if(e.hideIcons=!0,r)throw new E(`No value expected for ${pt}.`);break;case ci:if(e.flat=!0,r===lt)e.hideFiles=!0;else if(r===ct)e.hideFolders=!0;else if(r)throw new E(`Invalid flat option. Valid options: [${lt}|${ct}|<none>]`);break;default:throw new E(`Unknown option: ${o}`)}}),!e.paths||e.paths.length===0)throw new E("Path not provided (examples path /my/path | path ../relative | path c:\\my\\path).");for(let i=0;i<e.paths.length;i++){k.default.isAbsolute(e.paths[i])||(e.paths[i]=k.default.join(ne(),this.workspace.getActiveFile().parent.path,e.paths[i]));try{await Q.promises.access(e.paths[i])}catch(s){throw new E(`Path provided does not exist: ${e.paths[i]}`)}}return e}async buildDirectoryTree(t){async function e(r,a,l,c=0){if(c>t.maxDepth||i>=t.maxFiles)return null;let u=(await Q.promises.stat(r)).isDirectory();if(a!==r){let p=k.default.relative(a,r)+(u?"/":""),f=l.test(p);if(f.ignored&&!f.unignored)return null}i++;let d={name:k.default.basename(r),path:r,isDirectory:u};if(u){d.children=[];let p=await Q.promises.readdir(r,{withFileTypes:!0});for(let f of p){let m=k.default.join(r,f.name),F=await e(m,a,l,c+1);F&&d.children.push(F)}}return d}let i=0,s=(0,dt.default)().add(t.ignorePatterns),o=[];for(let r=0;r<t.paths.length;r++){let a=t.paths[r],l=await e(a,a,s);l&&(t.includeRoot||!l.children?o.push(l):o.push(...l.children))}return o}generateTreeHtml(t,e,i){let s=this.plugin.settings.apps,o=this.plugin.settings.patterns;function r(a,l){function c(u,d){let p=d.createEl("li");return p.createSpan({text:u.isDirectory?"\u{1F4C2}  ":"\u{1F4C4} "}),p.createEl("a",{href:`${Z}${encodeURI(u.path)}`,cls:"external-link",text:u.name}),i.hideIcons||o.forEach(f=>{let m=C.matchPattern(f,u.path,u.isDirectory,s);if(!m)return;let F=p.createSpan({cls:"clickable"});(0,_.setIcon)(F,m.icon),F.addEventListener("click",()=>{T(u.path,m.cmd,m.args)})}),p}for(let u of a)if(u.isDirectory){let d;i.hideFolders||(d=c(u,l)),u.children&&u.children.length>0&&(i.flat?r(u.children,l):r(u.children,d.createEl("ul")))}else i.hideFiles||c(u,l)}return r(t,e.createEl("ul"))}};var ut=require("obsidian"),O=class extends ut.FuzzySuggestModal{constructor(e,i,s){super(e);this.folders=i;this.toDo=s}getItems(){return this.folders}getItemText(e){return e.path}onChooseItem(e,i){(async()=>await this.toDo(e.path))()}};function xe(n){let t="";return n.forEach((e,i)=>{let s=i.split(w).pop();t+=e===null?`[DONE] ${s}
`:`[${e}] ${s}
`}),t}var ee=class extends b.Plugin{constructor(){super(...arguments);this.fm=new W(this);this.pe=new C(this);this.fileOperation="Copy"}_checkCallback(e,i,s,...o){return i()?(e||s(...o),!0):!1}_checkAsyncCallback(e,i,s,...o){return i()?((async()=>e||await s(...o))(),!0):!1}isActiveFileOrFolderCallback(e,i,...s){let o=this.fm.isActiveFileOrFolderAvailable.bind(this.fm);return this._checkCallback(e,o,i,...s)}isActiveFileOrFolderAsyncCallback(e,i,...s){let o=this.fm.isActiveFileOrFolderAvailable.bind(this.fm);return this._checkAsyncCallback(e,o,i,...s)}isFileExplorerActiveCallback(e,i,...s){let o=this.fm.isFileExplorerActive.bind(this.fm);return this._checkCallback(e,o,i,...s)}isFileExplorerActiveAsyncCallback(e,i,...s){let o=this.fm.isFileExplorerActive.bind(this.fm);return this._checkAsyncCallback(e,o,i,...s)}isFileExplorerAvailableCallback(e,i,...s){let o=this.fm.isFileExplorerAvailable.bind(this.fm);return this._checkCallback(e,o,i,...s)}isFileExplorerAvailableAsyncCallback(e,i,...s){let o=this.fm.isFileExplorerAvailable.bind(this.fm);return this._checkAsyncCallback(e,o,i,...s)}showSelectedInStatusBar(){this.selectedStatusBar.empty();let e=this.fm.getSelectedFilesOrFoldersPath(!1,!1);if(!this.settings.showSelectionStatusBar||!e)return;let i=0,s=0;for(let l of e){let c=this.app.vault.getAbstractFileByPath(l);c instanceof b.TFile?i++:c instanceof b.TFolder&&s++}if(i===0&&s===0)return;let o=i>0?`${i} \u{1F4C4}`:"",r=s>0?`${s} \u{1F4C2}`:"",a=i>0&&s>0?`(Selected: ${o} and ${r})`:`(Selected: ${o}${r})`;this.selectedStatusBar.createEl("span",{text:a})}showClipboardInStatusBar(){if(this.clipboardStatusBar.empty(),!this.settings.showClipboardStatusBar||!this.clipboard)return;let e=0,i=0;for(let l of this.clipboard.keys()){let c=this.app.vault.getAbstractFileByPath(l);c instanceof b.TFile?e++:c instanceof b.TFolder&&i++}if(e===0&&i===0)return;let s=e>0?`${e} \u{1F4C4}`:"",o=i>0?`${i} \u{1F4C2}`:"",r=this.fileOperation==="Copy"?"Copied to clipboard:":"Cut to clipboard:",a=e>0&&i>0?`(${r} ${s} and ${o})`:`(${r} ${s}${o})`;this.clipboardStatusBar.createEl("span",{text:a})}createOpenWithCmd(e,i,s){return{id:"open-with-"+e.toLowerCase(),name:"Open with "+e,checkCallback:o=>{let r=this.fm.isFileExplorerActive()?this.fm.getActiveFileOrFolder():this.app.workspace.getActiveFile();return r?(o||(async()=>await T(r,i,s))(),!0):!1}}}patchFileExplorerSelectionFunctions(){let e=this.fm.getFileExplorer();if(!e)return;let i=this.showSelectedInStatusBar.bind(this),s=e.tree,o=s.selectItem.bind(e.tree);s.selectItem=function(a){let l=o(a);return i(),l};let r=s.deselectItem.bind(e.tree);s.deselectItem=function(a){let l=r(a);return i(),l}}async onload(){this.settings=qe,await this.loadSettings(),this.app.workspace.onLayoutReady(()=>{this.patchFileExplorerSelectionFunctions()}),this.registerStatusBarItems(),this.registerVaultEvents(),this.registerMarkdownCodeBlockProcessors(),this.registerCommands(),this.registerContextMenus(),this.addSettingTab(new U(this.app,this))}onunload(){}async getFileConflictResolutionMethod(e){let i=this.settings.conflictResolutionMethod;return i==="PROMPT"?await new V(this.app,e).openAndWait():[i,!0]}async loadSettings(){this.settings={...this.settings,...await this.loadData()}}async saveSettings(){await this.saveData(this.settings),this.showClipboardInStatusBar(),this.showSelectedInStatusBar()}registerStatusBarItems(){this.selectedStatusBar=this.addStatusBarItem(),this.clipboardStatusBar=this.addStatusBarItem()}registerVaultEvents(){this.app.vault.on("delete",e=>{this.clipboard&&this.clipboard.has(e.path)&&(this.clipboard.delete(e.path),this.showClipboardInStatusBar()),this.showSelectedInStatusBar()})}registerMarkdownCodeBlockProcessors(){this.registerMarkdownCodeBlockProcessor("pathexplorer",async(e,i,s)=>this.pe.processCodeBlock(e,i))}registerContextMenus(){this.registerEvent(this.app.workspace.on("file-menu",(e,i)=>{this.settings.apps.forEach(s=>{s.showInMenu&&e.addItem(o=>{o.setTitle(`Open with ${s.name}`).setIcon(s.icon).onClick(async()=>await T(i,s.cmd,s.args))})})})),this.registerEvent(this.app.workspace.on("url-menu",(e,i)=>{if(!i.startsWith(Z))return;let s=decodeURI(i.replace(Z,"")),o=this.settings.apps,r=this.settings.patterns;for(let a of r){let l=C.matchPattern(a,s,ht.default.statSync(s).isDirectory(),o);l&&e.addItem(c=>{c.setTitle(`Open with ${l.name}`).setIcon(l.icon).onClick(async()=>{await T(s,l.cmd,l.args)})})}}))}registerCommands(){this.addCommand({id:"create-subfolder",name:"Create a subfolder within the focused or active file/folder",checkCallback:e=>this.isActiveFileOrFolderAsyncCallback(e,this.fm.createSubFolder.bind(this.fm))}),this.addCommand({id:"create-folder",name:"Create a folder as sibling of the focused or active file/folder",checkCallback:e=>this.isActiveFileOrFolderAsyncCallback(e,this.fm.createFolder.bind(this.fm))}),this.addCommand({id:"create-note",name:"Create a note within the focused or active folder",checkCallback:e=>this.isActiveFileOrFolderAsyncCallback(e,this.fm.createNote.bind(this.fm))}),this.addCommand({id:"duplicate-file",name:"Duplicate focused or active file/folder",checkCallback:e=>this.isActiveFileOrFolderAsyncCallback(e,this.fm.duplicateFile.bind(this.fm))}),this.addCommand({id:"copy-files-to-clipboard",name:"Copy selected files/folders to clipboard",checkCallback:e=>this.isActiveFileOrFolderCallback(e,()=>{this.clipboard=this.fm.getSelectedPathToNameMap(!0),this.fileOperation="Copy",new b.Notice("Files copied to clipboard"),this.showClipboardInStatusBar()})}),this.addCommand({id:"cut-files-to-clipboard",name:"Cut selected files/folders to clipboard",checkCallback:e=>this.isActiveFileOrFolderCallback(e,()=>{this.clipboard=this.fm.getSelectedPathToNameMap(!0),this.fileOperation="Move",new b.Notice("Files cut to clipboard"),this.showClipboardInStatusBar()})}),this.addCommand({id:"paste-files-from-clipboard",name:"Paste files/folders from clipboard to selected folder",checkCallback:e=>this.isActiveFileOrFolderAsyncCallback(e,async()=>{if(this.clipboard){let s=await(this.fileOperation==="Copy"?this.fm.copyFiles.bind(this.fm):this.fm.moveFiles.bind(this.fm))(this.fm.getActiveFileOrFolder().path,this.clipboard);this.fileOperation==="Move"&&(this.clipboard=null,this.showClipboardInStatusBar()),this.settings.showCopyMoveStats&&new b.Notice(`${this.fileOperation} stats:

`+xe(s))}})}),this.addCommand({id:"clear-clipboard",name:"Clear clipboard",checkCallback:e=>{if(!this.clipboard)return!1;if(e)return!0;this.clipboard=null,this.showClipboardInStatusBar()}}),this.addCommand({id:"move-files",name:"Move selected files/folders to a new folder",checkCallback:e=>this.isActiveFileOrFolderCallback(e,()=>{new O(this.app,this.app.vault.getAllFolders(!0),async i=>{let s=await this.fm.moveFiles(i);this.settings.showCopyMoveStats&&new b.Notice(`Move stats:

`+xe(s))}).open()})}),this.addCommand({id:"copy-files",name:"Copy selected files/folders to a new folder",checkCallback:e=>this.isActiveFileOrFolderCallback(e,()=>{new O(this.app,this.app.vault.getAllFolders(!0),async i=>{let s=await this.fm.copyFiles(i);this.settings.showCopyMoveStats&&new b.Notice(`Copy stats:

`+xe(s))}).open()})}),this.addCommand({id:"select-all",name:"Select all siblings and children of the focused or active file/folder",checkCallback:e=>this.isFileExplorerActiveCallback(e,()=>{this.fm.selectAll(!0),this.showSelectedInStatusBar()})}),this.addCommand({id:"toggle-select",name:"Toggle selection of the focused or active file/folder",checkCallback:e=>this.isFileExplorerActiveCallback(e,()=>{this.fm.toggleSelect(),this.showSelectedInStatusBar()})}),this.addCommand({id:"deselect-all",name:"Clear selection",checkCallback:e=>this.isFileExplorerActiveCallback(e,()=>{this.fm.deselectAll(),this.showSelectedInStatusBar()})}),this.addCommand({id:"invert-selection",name:"Invert selection",checkCallback:e=>this.isFileExplorerActiveCallback(e,()=>{this.fm.invertSelection(),this.showSelectedInStatusBar()})}),this.addCommand({id:"rename",name:"Rename focused or active file/folder",checkCallback:e=>this.isFileExplorerActiveCallback(e,this.fm.renameFile.bind(this.fm))}),this.addCommand({id:"go-to-in-file-explorer",name:"Go to file or folder in file explorer",checkCallback:e=>this.isFileExplorerAvailableCallback(e,()=>{let i=[...this.app.vault.getAllFolders(!0),...this.app.vault.getFiles()];new O(this.app,i,async s=>{this.fm.focusPath(s)}).open()})}),this.settings.apps.forEach(e=>{this.addCommand(this.createOpenWithCmd(e.name,e.cmd,e.args))})}};

/* nosourcemap */